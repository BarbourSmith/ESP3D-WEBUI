<div id="calibrationtab" class="tabcontent calibrationtab">
  <p>EXPERIMENTAL! To use this tab to plot calibration data, copy and paste the line that starts with CLBM: in the serial messages and paste it into the text area above the buttons below.</p>
  <div style="display: flex;flex-direction: column;">
    <div id="calibrationcontainer" style="display: flex; flex-direction: row;">
      <canvas id="CursorLayer" width="1000" height="600"
        style="width: 1000px;height: 600px; border: 1px solid;padding: 2px;"></canvas>
      <div style="width: 100%;height: 600px; overflow: auto;padding-left: 10px;">
        <table id="caltable" class="caltable"> </table>
      </div>
    </div>
    <div id="caltable-container">
      <textarea id="caldata" onchange="measurementsChanged()"></textarea>
    </div>
    <div id="calcontrols" style="height: 100px">
      <!-- <button class="btn btn-info" onclick="onCalibrationButtonsClick('$ALL','Retract All');">Retract All</button>
      <button class="btn btn-info" onclick="onCalibrationButtonsClick('$EXT','Extend All');">Extend All</button>
      <button class="btn btn-info" onclick="onCalibrationButtonsClick('$TKSLK','Apply Tension');">Apply Tension</button>
      <button class="btn btn-primary" onclick="onCalibrationButtonsClick('$CAL','Calibrate');">Calibrate</button>
      <span class="spacerbtn"></span>
      <button id="systemStatusCal" class="btn btn-warning" onclick="clearAlarm()">Alarm</button> -->
      <span class="spacerbtn"></span>
      <button id="compute-sim-button" class="btn btn-primary" onclick="computeSim()" disabled>Compute</button>
      <span id="fitnessMessage" class="calfitnesstext">Fitness: </span>
    </div>
  </div>
</div>
<script>
  const calele = document.getElementById('calibrationtab');
  calele.addEventListener('activate', () => {
    // just do one round...
    initialGuess = computeLinesFitness(SavedMeasurements, initialGuess);
  });
  calele.addEventListener('deactivate', () => {
    clearCalCanvas();
  })

</script>